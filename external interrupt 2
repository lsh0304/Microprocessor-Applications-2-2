#include <iom128v.h>
#include <macros.h>

void delay_m(unsigned int m);
char number[10] = {0x04,0x2F,0x18,0x09,0x23,0x41,0x40,0x07,0x00,0x01};
char cnt, flag=1;

void main(void)
{
    DDRD=0x7f;
    EICRB=0x0e; // INT4, INT5 Falling Edge
    EIMSK=0x30; // INT4, INT5 Enable
    SREG|=0x80; // 1000 0000

    PORTD=number[cnt];

    while(1){

        while(flag){
            cnt++;
            if(cnt==10) cnt=0;
            PORTD=number[cnt];
            delay_m(500);
        }
        while(!flag){
            cnt--;
            if(cnt==-1) cnt=9;
            PORTD=number[cnt];
            delay_m(500);
        }
    }
}

#pragma interrupt_handler int4_isr:iv_INT4
void int4_isr(void)
{
    flag=1;
}

#pragma interrupt_handler int5_isr:iv_INT5
void int5_isr(void)
{
    flag=0;
}

void delay_m(unsigned int m)
{
    int i, j;
    for (i=0;i<m;i++){
        for (j=0;j<2100;j++){
            ;
        }
    }
}
